{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '45097804-c04896a24774ae5ff52198fb8';\nconst URL = 'https://pixabay.com/api/';\n\nexport async function fetchImages(query, page = 1, perPage = 20) {\n  try {\n    const response = await axios.get(URL, {\n      params: {\n        key: API_KEY,\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        page: page,\n        per_page: perPage,\n      },\n    });\n\n    return {\n      images: response.data.hits,\n      total: response.data.totalHits\n    };\n  } catch (error) {\n    console.error('Fetching error:', error);\n    throw error;\n  }\n}\n","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst loadingIndicator = document.getElementById('loader');\nconst gallery = document.getElementById('image-gallery');\n\nconst lightbox = new SimpleLightbox('.gallery-link', {\n  captionsData: 'alt',\n  captionDelay: 250\n});\n\nexport function renderImages(images) {\n  if (!gallery) {\n    return;\n  }\n\n  const imageItems = images.map(image => `\n    <div class=\"gallery-item\">\n      <a href=\"${image.largeImageURL}\" class=\"gallery-link\">\n        <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" class=\"gallery-image\"/>\n      </a>\n      <div class=\"info\">\n        <p class=\"info-item\"><b>Likes:</b> ${image.likes}</p>\n        <p class=\"info-item\"><b>Views:</b> ${image.views}</p>\n        <p class=\"info-item\"><b>Comments:</b> ${image.comments}</p>\n        <p class=\"info-item\"><b>Downloads:</b> ${image.downloads}</p>\n      </div>\n    </div>\n  `).join('');\n\n  gallery.insertAdjacentHTML('beforeend', imageItems);\n  lightbox.refresh();\n}\n\nexport function showError(errorMessage) {\n  iziToast.error({\n    title: 'Error',\n    message: errorMessage,\n    position: 'topRight'\n  });\n}\n\nexport function showLoading(loadMoreButton) {\n  loadingIndicator.style.display = 'block';\n  if (loadMoreButton) {\n    loadMoreButton.style.display = 'none';\n  }\n}\n\nexport function hideLoading(loadMoreButton) {\n  loadingIndicator.style.display = 'none';\n  if (loadMoreButton) {\n    loadMoreButton.style.display = 'block';\n  }\n}\n\nexport function showEndMessage() {\n  iziToast.info({\n    title: 'Info',\n    message: \"We're sorry, but you've reached the end of search results.\",\n    position: 'topRight'\n  });\n}\n","import { fetchImages } from './js/pixabay-api.js';\nimport { renderImages, showError, showLoading, hideLoading, showEndMessage } from './js/render-functions.js';\n\nconst form = document.getElementById('search-form');\nconst input = document.getElementById('search-input');\nconst gallery = document.getElementById('image-gallery');\nconst loadMoreButton = document.getElementById('load-more');\n\nlet currentPage = 1;\nlet currentQuery = '';\nlet totalHits = 0;\nconst perPage = 15;\n\nform.addEventListener('submit', handleSearch);\nloadMoreButton.addEventListener('click', handleLoadMore);\n\nfunction handleSearch(event) {\n  event.preventDefault();\n\n  const query = input.value.trim();\n  if (query === '') {\n    showError('Please enter a search term.');\n    return;\n  }\n\n  currentQuery = query;\n  currentPage = 1;\n  gallery.innerHTML = '';\n  showLoading(loadMoreButton);\n\n  fetchImages(currentQuery, currentPage, perPage).then(({ images, total }) => {\n    hideLoading(loadMoreButton);\n    totalHits = total;\n\n    if (images.length === 0) {\n      gallery.innerHTML = \"\";\n      showError('Sorry, there are no images matching your search query. Please try again!');\n      loadMoreButton.style.display = 'none';\n    } else {\n      renderImages(images);\n      if (images.length < perPage || images.length === totalHits) {\n        loadMoreButton.style.display = 'none';\n        showEndMessage();\n      } else {\n        loadMoreButton.style.display = 'block';\n      }\n    }\n  }).catch(error => {\n    hideLoading(loadMoreButton);\n    showError('An error occurred while fetching images. Please try again later.');\n  });\n}\n\nfunction handleLoadMore() {\n  currentPage += 1;\n  showLoading(loadMoreButton);\n\n  fetchImages(currentQuery, currentPage, perPage).then(({ images }) => {\n    renderImages(images);\n      hideLoading(loadMoreButton);\n      \n        const firstGalleryItem = gallery.querySelector('.gallery-item');\n    if (firstGalleryItem) {\n      const { height } = firstGalleryItem.getBoundingClientRect();\n      window.scrollBy({\n        top: height * 2.5,\n        behavior: 'smooth'\n      });\n    }\n\n    const loadedImagesCount = currentPage * perPage;\n\n    if (loadedImagesCount >= totalHits) {\n      loadMoreButton.style.display = 'none';\n      showEndMessage();\n    } else if (images.length < perPage) {\n      loadMoreButton.style.display = 'none';\n      showEndMessage();\n    }\n  }).catch(error => {\n    hideLoading(loadMoreButton);\n    showError('An error occurred while fetching images. Please try again later.');\n  });\n}\n"],"names":["API_KEY","URL","fetchImages","query","page","perPage","response","axios","error","loadingIndicator","gallery","lightbox","SimpleLightbox","renderImages","images","imageItems","image","showError","errorMessage","iziToast","showLoading","loadMoreButton","hideLoading","showEndMessage","form","input","currentPage","currentQuery","totalHits","handleSearch","handleLoadMore","event","total","firstGalleryItem","height"],"mappings":"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"}